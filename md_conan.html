<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ZisaFVM: Conan</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ZisaFVM
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_conan.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Conan </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Conan is a wonderful tool to download and install compiled libraries to a local folder on your computer. In addition it generates the necesary information to link against these local versions.</p>
<p>It can be installed either using the package manager or </p><pre class="fragment">$ pip install --user conan
</pre><p> (or <code>pip3</code> depending on your Linux distribution).</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Quick Conan Primer</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
Conan Profiles</h2>
<p>In order to obtain ABI compatible libraries, Conan must be told which compiler, compiler version and which standard library should be used. My initial faulty assumption was it would just deduce everything from the environment variable <code>CC</code>. Instead Conan has a concept of "profiles" which are textfiles containing all the relevant information.</p>
<p>One easy way setup a custom profile would be to run </p><pre class="fragment">$ conan profile show default
</pre><p> and see what can/needs to be modified. Then create a new profile <code>PROFILE</code> in the folder <code>~/.conan/profiles</code>. Use this profile by </p><pre class="fragment">$ conan install CONANFILE --profile PROFILE
</pre><p> where <code>CONANFILE</code> is typically <code>../conanfile.txt</code> and <code>PROFILE</code> is the name of the file you created in <code>~/.conan/profiles</code>, e.g., <code>default</code> if you want to redundantly specify the default profile.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
C++11 Standard Library</h2>
<p>Modern C++ links to a C++11 compatible version of the standard library. Conan must be told to use the modern library, either by modifying a profile (possibly the default) or by adding </p><pre class="fragment">$ conan CONANFILE -s compiler.libcxx=libstdc++11
</pre><h1><a class="anchor" id="autotoc_md13"></a>
Combining CMake and Conan</h1>
<p>Conan and CMake work very nicely together. There are several ways of combining the two. The rationale is to avoid a strong coupling of the two. Therefore, we strive for a <code>CMakeLists.txt</code> which does not contain Conan specific instructions. After all Conan is just a way of obtaining libraries and not the way. In particular, if all dependencies are installed in standard locations (meaning CMake can find them), then Conan should not be needed.</p>
<p>The two <em>generators</em> we use are</p>
<ul>
<li><b>cmake_find_package</b> which automatically generates <code>FindXYZ.cmake</code>.</li>
<li><b>cmake_paths</b> which generates a file with the CMake variables required to find the generated <code>FindXYZ.cmake</code> modules.</li>
</ul>
<p>Therefore, if we were to <code>include(conan_paths.cmake)</code>, CMake would pickup the Conan generated find modules. Fortunately, there's an interesting trick to avoid literally including the file in <code>CMakeLists.txt</code>. Namely, CMake has a command line argument <code>-DCMAKE_PROJECT_${PROJECT}_INCLUDE</code> which can be used to include a file, e.g., <code>conan_paths.cmake</code>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
